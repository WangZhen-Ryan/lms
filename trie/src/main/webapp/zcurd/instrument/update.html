
<#include "/common/head.html"/>


<div class="easyui-panel updatePage multiple"
	data-options="fit:true,border:false">
	<form id="ff" class="easyui-form" method="post">
		<table class="table1">
			<tr>
				<th><span id="instrument_type_label">仪表类型：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-combobox" id="instrument_type" name="instrument_type"
							value="${model.instrument_type!''}"
							data-options="
	            				valueField: 'id',
   								textField: 'text',
   								fit: true,
   								editable:false,
	            				data: [
	            					{id:'', text:''}<#list dictDatainstrumenttype.keySet() as key>,{id:'${key}', text:'${dictDatainstrumenttype.get(key)}'}</#list>
	            				]
	            				,required:true
	            				,panelHeight:'auto'" />
					</div>
				</td>
				<th><span id="location_label">位置：</span></th>
				<td>
					<div class="wrap_input">
						<input id="location" name="location" id="location" class="easyui-combobox" value="${model.location!''}"
							data-options="
               				valueField: 'id',
        					textField: 'text',
        					fit: true,
        					url:'addressDic',
            				required:true,
            				panelHeight:200,
            				showDataSize:20,
            				filter: function(q, row){//当输入数据时会调用该方法进行筛选过滤,支持键值同时搜索
									var opts = $(this).combobox('options');
									return row[opts.textField].indexOf(q) >= 0;
							}" />
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="date_label">数据跳线：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="date" id="date"
							value="${model.date!''}" data-options="fit: true"></input>
					</div>
				</td>
				<th><span id="mdf_label">对应数据跳线：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="mdf" id="mdf"
							value="${model.mdf!''}" data-options="fit: true"></input>
					</div>
				</td>
				

			</tr>
			<tr>
				<th><span id="fiber_label">光纤跳线：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="fiber" id="fiber"
							value="${model.fiber!''}" data-options="fit: true"></input>
					</div>
				</td>
				<th><span id="odf_label">对应光纤跳线：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="odf" id="odf"
							value="${model.odf!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="ip_label">IP：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="ip" id="ip"
							value="${model.ip!''}" data-options="fit: true"></input>
					</div>
				</td>
				<th><span id="modulemo_label">模块规格：</span></th>
				<td>
					<div class="wrap_input">
							<input class="easyui-combobox" id="modulemo" name="modulemo"value="${model.modulemo!''}"
							data-options="
	            				valueField: 'id',
   								textField: 'text',
   								fit: true,
   								editable:false,
	            				data: [
	            					{id:'', text:''}<#list dictDatamodulemo.keySet() as key>,{id:'${key}', text:'${dictDatamodulemo.get(key)}'}</#list>
	            				]
	            				,panelHeight:'auto'
	            	" />
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="moduletype_label">模块类型：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-combobox" id="moduletype" name="moduletype" value="${model.moduletype!''}"
							data-options="
	            				valueField: 'id',
   								textField: 'text',
   								fit: true,
	            				data: [
	            					{id:'', text:''}<#list dictDatamoduletype.keySet() as key>,{id:'${key}', text:'${dictDatamoduletype.get(key)}'}</#list>
	            				]
	            				,panelHeight:'auto'
	            	" />
					</div>
				</td>
				<th><span id="port_label">端口：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="port" id="port"
							value="${model.port!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="status_label">状态：</span></th>
				<td>
					<div class="wrap_input">
						<input id="status" name="status" id="status"
							class="easyui-combobox" value="${model.status!''}"
							data-options="
               				editable:false,
               				valueField: 'id',
        					textField: 'text',
        					fit: true,
        					data:[
        						{id:'', text:''}<#list dictDatastatus.keySet() as key>,{id:'${key}', text:'${dictDatastatus.get(key)}'}</#list>
	               			]
	               			,panelHeight:'auto'
               		" />
					</div>
				</td>
				<th><span id="model_label">型号：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="model"
							id="model" value="${model.model!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="assetno_label">资产编号：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="assetno"
							id="assetno" value="${model.assetno!''}" data-options="fit: true"></input>
					</div>
				</td>
				<th><span id="sn_label">SN：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="sn" id="sn"
							value="${model.sn!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="borrower_label">申请人：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-combobox" type="text" name="borrower" id="borrower" value="${model.borrower!''}" data-options="
            				valueField: 'id',
  							textField: 'text',
  							fit: true,
            				data: [
            					{id:'', text:''}<#list dictDataUser.keySet() as key>,{id:'${key}', text:'${dictDataUser.get(key)}'}</#list>
            				],
            				panelHeight:'auto'" >
					</div>
				</td>
				<th><span id="OUT_from_label">借用日：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-datebox" type="text" name="outfrom"
							id="outfrom" value="${model.outfrom!''}" data-options="fit: true,editable:false"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="OUT_till_label">结束日：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-datebox" type="text" name="outtill"
							id="outtill" value="${model.outtill!''}" data-options="fit: true,editable:false"></input>
					</div>
				</td>
				<th><span id="Project_label">项目：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="project"
							id="project" value="${model.project!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="User_label">使用人：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-combobox" type="text" name="user" id="user" value="${model.user!''}" data-options="
            				valueField: 'id',
  							textField: 'text',
  							fit: true,
            				data: [
            					{id:'', text:''}<#list dictDataUser.keySet() as key>,{id:'${key}', text:'${dictDataUser.get(key)}'}</#list>
            				],
            				panelHeight:'auto'" >
					</div>
				</td>
				<th><span id="modulesn_label">模块编号：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="modulesn" id="modulesn"
							value="${model.modulesn!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="owner_label">资产所有人：</span></th>
				<td>
					<div class="wrap_input">
						<input id="owner" name="owner" id="owner" class="easyui-textbox" value="${model.owner!''}" data-options="fit: true"/>
					</div>
				</td>
				<th><span id="remark_label">备注：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="remark"
							id="remark" value="${model.remark!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
			<tr>
				<th><span id="meterno_label">计量编号：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-textbox" type="text" name="meterno"
							id="meterno" value="${model.meterno!''}" data-options="fit: true"></input>
					</div>
				</td>
				<th><span id="number_label">数量：</span></th>
				<td>
					<div class="wrap_input">
						<input class="easyui-numberbox" type="text" name="number"
							id="number" value="${model.number!''}" data-options="fit: true"></input>
					</div>
				</td>
			</tr>
		</table>
	</form>
</div>
<script>
top.window.subPage.save = save;
function save() {
	if($("#ff").form('validate')) {
		$.post("update", getParam(), function(data) {
			if(data.result=="success"){
				top.window.closeWindow();
				top.window.subPage.loadCurrDatagrid();
			}
		});
	}
}
function getParam() {
	var param = {
			"id": ${model.id}, 
			"model.instrument_type":getInputValue("instrument_type"),
       	    "model.location": getInputValue("location"), 
       	    "model.date": getInputValue("date"), 
       	    "model.mdf": getInputValue("mdf"), 
       	    "model.odf": getInputValue("odf"), 
       	    "model.fiber": getInputValue("fiber"), 
       	    "model.ip": getInputValue("ip"), 
       	    "model.modulemo": getInputValue("modulemo"), 
       	    "model.moduletype": getInputValue("moduletype"), 
       	    "model.port": getInputValue("port"), 
       	    "model.meterno": getInputValue("meterno"), 
       	    "model.number": getInputValue("number"), 
       	    "model.status": getInputValue("status"), 
       	    "model.assetno": getInputValue("assetno"), 
       	    "model.modulesn": getInputValue("modulesn"), 
       	    "model.sn": getInputValue("sn"), 
       	    "model.owner": getInputValue("owner"), 
       	    "model.remark": getInputValue("remark"), 
       	 	"model.borrower" : getInputValue("borrower"),
			"model.user" : getInputValue("user"),
			"model.outfrom" : getInputValue("outfrom"),
			"model.outtill" : getInputValue("outtill"),
			"model.project" : getInputValue("project")
	}
	for(key in param) {
		if(!param[key]) {
			delete param[key];
		}
	}

	return param;
}

//扩展js
</script>
<#include "/common/foot.html"/>